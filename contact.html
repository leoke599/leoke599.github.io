<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contact Us | NASA HUNCH Project</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.4/dist/tailwind.min.css">
  <style>
    body {
      background: #f9fafb; /* very light gray background */
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Inter', system-ui, sans-serif;
    }

    main {
      backdrop-filter: blur(6px);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    main:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.06);
    }

    input:focus, textarea:focus {
      outline: none;
      border-color: #9ca3af; /* subtle neutral gray */
      box-shadow: 0 0 0 2px rgba(156, 163, 175, 0.2);
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    form { animation: fadeIn 0.4s ease-out; }
  </style>
</head>

<body class="text-gray-800">
  <main class="max-w-md w-full mx-auto p-8 bg-white rounded-2xl shadow-sm border border-gray-200">
    <h1 class="text-3xl font-bold mb-2 text-center text-gray-800">Contact Us</h1>
    <p class="text-center text-gray-500 mb-6">Have a question or feedback about our NASA HUNCH project? Let us know.</p>

    <form id="contact" action="/api/contact" method="POST" class="flex flex-col gap-4">
      <label class="flex flex-col text-sm font-medium text-gray-700">
        Name
        <input type="text" name="name" required maxlength="80"
          class="border border-gray-300 mt-1 p-2 rounded-md focus:ring-1 focus:ring-gray-400 transition" />
      </label>

      <label class="flex flex-col text-sm font-medium text-gray-700">
        Email
        <input type="email" name="email" required maxlength="120"
          class="border border-gray-300 mt-1 p-2 rounded-md focus:ring-1 focus:ring-gray-400 transition" />
      </label>

      <label class="flex flex-col text-sm font-medium text-gray-700">
        Message
        <textarea name="message" required maxlength="5000" rows="5"
          class="border border-gray-300 mt-1 p-2 rounded-md focus:ring-1 focus:ring-gray-400 transition"></textarea>
      </label>

      <!-- Cloudflare Turnstile widget -->
      <div
        class="cf-turnstile self-center mt-2"
        data-sitekey="0x4AAAAAAB86w4VDNVovRyC5"
        data-appearance="always"
        data-callback="tsOk"
        data-error-callback="tsErr"
        data-timeout-callback="tsErr">
      </div>

      <!-- Failsafe warning -->
      <div id="captcha-warning" class="hidden text-red-600 text-center text-sm font-medium mt-2">
        ⚠️ CAPTCHA failed to load. Try another network or browser.
      </div>

      <button id="sendBtn" type="submit"
        class="bg-gray-900 text-white py-2.5 px-4 rounded-md font-medium hover:bg-gray-800 focus:ring-2 focus:ring-gray-400 disabled:opacity-50 transition">
        Send Message
      </button>
    </form>
  </main>

  <!-- Cloudflare Turnstile -->
  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>

  <noscript>
    <p class="text-red-600 text-center mt-4">⚠️ Please enable JavaScript to view the CAPTCHA and submit this form.</p>
  </noscript>

  <script>
    // Disable send button while submitting
    const form = document.getElementById('contact');
    const btn = document.getElementById('sendBtn');
    form.addEventListener('submit', () => {
      btn.disabled = true;
      btn.textContent = 'Sending…';
    });

    // Turnstile callbacks
    window.tsOk = function () {
      const warn = document.getElementById('captcha-warning');
      if (warn) warn.classList.add('hidden');
    };
    window.tsErr = function () {
      const warn = document.getElementById('captcha-warning');
      if (warn) warn.classList.remove('hidden');
    };

    // Fallback if Turnstile never loads (blocked by network)
    window.addEventListener('load', () => {
      setTimeout(() => {
        if (!window.turnstile) {
          const warn = document.getElementById('captcha-warning');
          if (warn) warn.classList.remove('hidden');
        }
      }, 6000);
    });
  </script>
</body>
</html>
